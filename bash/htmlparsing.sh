#!/bin/bash

if [ "$1" == "" ];
then
    echo "Usage: $0 <domain> <output>"
    echo "Example: $0 domain.com"
    echo "Output is optional!"
else
    rm -rf domain
    if [ "$2" != "" ];
    then
        echo "Printing output in $2"
    fi
    {
    curl -L $1 /dev/null | grep -oP '\"http.*?\"' | tr -d '"' | cut -d "/" -f 3 | tr -d '\\$' | awk '!seen[$0]++' > domain
    } &> /dev/null
    if [ "$2" != "" ];
    then
        {
        echo "HOSTS FOUND!"
        for url in $(cat domain);
        do
            echo "$url:"
            echo "$(host $url | grep "has address" | sed 's/.*has address//' )"                 
            echo "--------------------"

        done
        }>$2
    else  
        echo "HOSTS FOUND!"
        for url in $(cat domain);
        do
            echo "$url:"
            echo "$(host $url | grep "has address" | sed 's/.*has address//' )"                 
            echo "--------------------"

        done
    fi
    rm -rf domain
fi